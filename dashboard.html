<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastosano Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="app" class="min-h-screen bg-gray-50">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">Pastosano</h1>
                        <span class="ml-2 text-sm text-gray-500">Dashboard</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600" id="current-date"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <button onclick="showTab('overview')" id="tab-overview" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-orange-500 text-orange-600">
                        üìä Panoramica
                    </button>
                    <button onclick="showTab('reservations')" id="tab-reservations" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üìÖ Prenotazioni
                    </button>
                    <button onclick="showTab('orders')" id="tab-orders" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üõçÔ∏è Ordini
                    </button>
                    <button onclick="showTab('menu')" id="tab-menu" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üìã Menu
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Overview Tab -->
            <div id="content-overview" class="tab-content">
                <div class="space-y-6">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-blue-100 rounded-lg">
                                    <span class="text-2xl">üìÖ</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Prenotazioni Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">24</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 rounded-lg">
                                    <span class="text-2xl">üõçÔ∏è</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Ordini Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">18</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-yellow-100 rounded-lg">
                                    <span class="text-2xl">üí∞</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Fatturato Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">‚Ç¨650</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-purple-100 rounded-lg">
                                    <span class="text-2xl">‚≠ê</span>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Soddisfazione</p>
                                    <p class="text-2xl font-bold text-gray-900">4.8/5</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Placeholder -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Ordini Settimanali</h3>
                            <div class="h-64 bg-gray-100 rounded flex items-center justify-center">
                                <p class="text-gray-500">Grafico ordini settimanali</p>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Fatturato Settimanale</h3>
                            <div class="h-64 bg-gray-100 rounded flex items-center justify-center">
                                <p class="text-gray-500">Grafico fatturato settimanale</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reservations Tab -->
            <div id="content-reservations" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Prenotazioni di Oggi</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cliente</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Orario</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ospiti</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Stato</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Mario Rossi</td><td class="px-6 py-4 text-sm text-gray-500">19:30</td><td class="px-6 py-4 text-sm text-gray-500">4</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">confermata</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Anna Verdi</td><td class="px-6 py-4 text-sm text-gray-500">20:00</td><td class="px-6 py-4 text-sm text-gray-500">2</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">in-attesa</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Luca Bianchi</td><td class="px-6 py-4 text-sm text-gray-500">20:30</td><td class="px-6 py-4 text-sm text-gray-500">6</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">confermata</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Sofia Neri</td><td class="px-6 py-4 text-sm text-gray-500">21:00</td><td class="px-6 py-4 text-sm text-gray-500">3</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">annullata</span></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="content-orders" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Ordini Recenti</h3>
                        <button onclick="generatePDF()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm">
                            üñ®Ô∏è PDF Ordini (<span id="selected-count">0</span>)
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="1" data-customer="Mario Rossi" data-time="19:45" data-items="Spaghetti Carbonara x2, Tiramisu x1, Vino Rosso x1">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Mario Rossi</h4>
                                        <p class="text-sm text-gray-600">19:45</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-yellow-500">‚è±Ô∏è</span>
                                        <span class="text-sm font-medium">preparazione</span>
                                    </div>
                                    <span class="text-sm font-bold">‚Ç¨45.50</span>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="2" data-customer="Anna Verdi" data-time="20:15" data-items="Pizza Margherita x1, Insalata Mista x1, Acqua x2, Caffe x2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Anna Verdi</h4>
                                        <p class="text-sm text-gray-600">20:15</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-green-500">‚úÖ</span>
                                        <span class="text-sm font-medium">servito</span>
                                    </div>
                                    <span class="text-sm font-bold">‚Ç¨28.00</span>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="3" data-customer="Luca Bianchi" data-time="20:45" data-items="Antipasto Misto x1, Bistecca alla Griglia x2, Contorno di Verdure x2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Luca Bianchi</h4>
                                        <p class="text-sm text-gray-600">20:45</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <span class="text-blue-500">‚úÖ</span>
                                        <span class="text-sm font-medium">completato</span>
                                    </div>
                                    <span class="text-sm font-bold">‚Ç¨65.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Menu Tab -->
            <div id="content-menu" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Gestione Menu</h3>
                    <p class="text-gray-600">Sezione menu in sviluppo...</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Imposta la data corrente
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('it-IT', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });

        // Funzione per cambiare tab
        function showTab(tabName) {
            // Nascondi tutti i contenuti
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Rimuovi stile attivo da tutti i tab
            document.querySelectorAll('.tab-button').forEach(button => {
                button.className = 'tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700';
            });
            
            // Mostra il contenuto selezionato
            document.getElementById('content-' + tabName).classList.remove('hidden');
            
            // Attiva il tab selezionato
            document.getElementById('tab-' + tabName).className = 'tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-orange-500 text-orange-600';
        }

        // Funzione per aggiornare il conteggio degli ordini selezionati
        function updateSelection() {
            const selectedCount = document.querySelectorAll('.order-checkbox:checked').length;
            document.getElementById('selected-count').textContent = selectedCount;
        }

        // Funzione per generare il PDF
        function generatePDF() {
            const selectedOrders = document.querySelectorAll('.order-checkbox:checked');
            
            if (selectedOrders.length === 0) {
                alert('Seleziona almeno un ordine per creare il PDF');
                return;
            }

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Header
                doc.setFontSize(20);
                doc.text('ORDINI PASTO SANO - FORNITORE', 20, 20);
                
                doc.setFontSize(12);
                doc.text(`Data: ${new Date().toLocaleDateString('it-IT')}`, 20, 30);
                doc.text(`Ordini selezionati: ${selectedOrders.length}`, 20, 40);
                
                let yPosition = 60;
                
                selectedOrders.forEach((checkbox, index) => {
                    const customer = checkbox.dataset.customer;
                    const time = checkbox.dataset.time;
                    const items = checkbox.dataset.items;
                    const id = checkbox.dataset.id;
                    
                    // Numero ordine
                    doc.setFontSize(12);
                    doc.setFont(undefined, 'bold');
                    doc.text(`${index + 1}. #ORD${id.padStart(6, '0')}`, 20, yPosition);
                    yPosition += 8;
                    
                    // Nome cliente
                    doc.setFontSize(11);
                    doc.setFont(undefined, 'normal');
                    doc.text(`- ${customer}`, 25, yPosition);
                    yPosition += 6;
                    
                    // Orario
                    doc.text(`Orario: ${time}`, 25, yPosition);
                    yPosition += 6;
                    
                    // Prodotti
                    doc.text(`Prodotti:`, 25, yPosition);
                    yPosition += 6;
                    
                    items.split(', ').forEach(item => {
                        doc.text(`  ${item}`, 30, yPosition);
                        yPosition += 5;
                    });
                    
                    yPosition += 8;
                    
                    // Nuova pagina se necessario
                    if (yPosition > 250 && index < selectedOrders.length - 1) {
                        doc.addPage();
                        yPosition = 20;
                    }
                });
                
                doc.save('ordini-selezionati.pdf');
            } catch (error) {
                console.error('Errore nella generazione del PDF:', error);
                alert('Errore nella generazione del PDF: ' + error.message);
            }
        }
    </script>
</body>
</html>