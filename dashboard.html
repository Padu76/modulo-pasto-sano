
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Pasto Sano</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f39c12; color: white; }
    .btn { background-color: #27ae60; color: white; padding: 10px 16px; border: none; cursor: pointer; border-radius: 5px; }
    .btn.secondary { background-color: #d35400; margin-left: 10px; }
  </style>
</head>
<body>
  <h1>üìä Dashboard Ordini - Pasto Sano</h1>

  <table id="ordini">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Articoli Ordinati</th>
        <th>Prezzo Totale</th>
      </tr>
    </thead>
    <tbody>
      <tr data-nome="Andrea Padoan" data-articoli="Fusilli (x3), Roastbeef (x2)">
        <td>Andrea Padoan</td>
        <td>Fusilli (x3), Roastbeef (x2)</td>
        <td>40.00‚Ç¨</td>
      </tr>
      <tr data-nome="Lara" data-articoli="Fusilli (x1), Roastbeef (x1), Riso (x1), Pancakes (x1)">
        <td>Lara</td>
        <td>Fusilli (x1), Roastbeef (x1), Riso (x1), Pancakes (x1)</td>
        <td>30.00‚Ç¨</td>
      </tr>
    </tbody>
  </table>

  <button class="btn" onclick="esportaCSV()">‚¨áÔ∏è Esporta CSV</button>
  <button id="exportPdf" class="btn secondary">üìÑ Esporta PDF Fornitore</button>

  <script>
    function esportaCSV() {
      let csv = 'Nome,Articoli Ordinati,Prezzo Totale\n';
      document.querySelectorAll('#ordini tbody tr').forEach(row => {
        const cols = row.querySelectorAll('td');
        csv += [...cols].map(td => td.textContent).join(',') + '\n';
      });
      const blob = new Blob([csv], {{ type: 'text/csv;charset=utf-8;' }});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'ordini.csv';
      link.click();
    }

    document.getElementById('exportPdf').addEventListener('click', () => {
      const {{ jsPDF }} = window.jspdf;
      const doc = new jsPDF();
      let y = 10;
      doc.setFontSize(16);
      doc.text("ORDINI PER FORNITORE", 10, y);
      y += 10;

      document.querySelectorAll('#ordini tbody tr').forEach((row, i) => {
        const nome = row.getAttribute('data-nome');
        const articoli = row.getAttribute('data-articoli');
        doc.setFontSize(12);
        doc.text(`${i + 1}. ${nome}`, 10, y); y += 8;
        doc.text(`- ${articoli}`, 14, y); y += 10;
      });

      doc.save("ordini_fornitore.pdf");
    });
  </script>
</body>
</html>
