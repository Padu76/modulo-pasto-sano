<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastosano Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">Pastosano</h1>
                        <span class="ml-2 text-sm text-gray-500">Dashboard</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600" id="current-date"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <button onclick="showTab('overview')" id="tab-overview" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-orange-500 text-orange-600">
                        <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        Panoramica
                    </button>
                    <button onclick="showTab('reservations')" id="tab-reservations" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        Prenotazioni
                    </button>
                    <button onclick="showTab('orders')" id="tab-orders" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                        </svg>
                        Ordini
                    </button>
                    <button onclick="showTab('menu')" id="tab-menu" class="tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Menu
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Overview Tab -->
            <div id="content-overview" class="tab-content">
                <div class="space-y-6">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-blue-100 rounded-lg">
                                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Prenotazioni Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">24</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 rounded-lg">
                                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Ordini Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">18</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-yellow-100 rounded-lg">
                                    <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Fatturato Oggi</p>
                                    <p class="text-2xl font-bold text-gray-900">â‚¬650</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-purple-100 rounded-lg">
                                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Soddisfazione</p>
                                    <p class="text-2xl font-bold text-gray-900">4.8/5</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Ordini Settimanali</h3>
                            <canvas id="ordersChart" width="400" height="200"></canvas>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Fatturato Settimanale</h3>
                            <canvas id="revenueChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reservations Tab -->
            <div id="content-reservations" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Prenotazioni di Oggi</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cliente</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Orario</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ospiti</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Stato</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Mario Rossi</td><td class="px-6 py-4 text-sm text-gray-500">19:30</td><td class="px-6 py-4 text-sm text-gray-500">4</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">confermata</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Anna Verdi</td><td class="px-6 py-4 text-sm text-gray-500">20:00</td><td class="px-6 py-4 text-sm text-gray-500">2</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">in-attesa</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Luca Bianchi</td><td class="px-6 py-4 text-sm text-gray-500">20:30</td><td class="px-6 py-4 text-sm text-gray-500">6</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">confermata</span></td></tr>
                                <tr><td class="px-6 py-4 text-sm font-medium text-gray-900">Sofia Neri</td><td class="px-6 py-4 text-sm text-gray-500">21:00</td><td class="px-6 py-4 text-sm text-gray-500">3</td><td class="px-6 py-4"><span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">annullata</span></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="content-orders" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Ordini Recenti</h3>
                        <button onclick="generatePDF()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                            </svg>
                            PDF Ordini (<span id="selected-count">0</span>)
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="1" data-customer="Mario Rossi" data-time="19:45" data-items="Spaghetti Carbonara x2, Tiramisu x1, Vino Rosso x1">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Mario Rossi</h4>
                                        <p class="text-sm text-gray-600">19:45</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-4 h-4 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        <span class="text-sm font-medium">preparazione</span>
                                    </div>
                                    <span class="text-sm font-bold">â‚¬45.50</span>
                                    <button onclick="showOrderDetails(1)" class="text-blue-600 hover:text-blue-800">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="2" data-customer="Anna Verdi" data-time="20:15" data-items="Pizza Margherita x1, Insalata Mista x1, Acqua x2, Caffe x2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Anna Verdi</h4>
                                        <p class="text-sm text-gray-600">20:15</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        <span class="text-sm font-medium">servito</span>
                                    </div>
                                    <span class="text-sm font-bold">â‚¬28.00</span>
                                    <button onclick="showOrderDetails(2)" class="text-blue-600 hover:text-blue-800">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" onchange="updateSelection()" class="order-checkbox w-4 h-4 text-green-600 rounded" data-id="3" data-customer="Luca Bianchi" data-time="20:45" data-items="Antipasto Misto x1, Bistecca alla Griglia x2, Contorno di Verdure x2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">Luca Bianchi</h4>
                                        <p class="text-sm text-gray-600">20:45</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        <span class="text-sm font-medium">completato</span>
                                    </div>
                                    <span class="text-sm font-bold">â‚¬65.00</span>
                                    <button onclick="showOrderDetails(3)" class="text-blue-600 hover:text-blue-800">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Menu Tab -->
            <div id="content-menu" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Gestione Menu</h3>
                    <p class="text-gray-600">Sezione menu in sviluppo...</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Imposta la data corrente
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('it-IT', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });

        // Crea i grafici
        function createCharts() {
            // Grafico ordini
            const ordersCtx = document.getElementById('ordersChart').getContext('2d');
            new Chart(ordersCtx, {
                type: 'bar',
                data: {
                    labels: ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'],
                    datasets: [{
                        label: 'Ordini',
                        data: [12, 19, 15, 22, 28, 35, 18],
                        backgroundColor: '#f97316',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });

            // Grafico fatturato
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'],
                    datasets: [{
                        label: 'Fatturato',
                        data: [340, 520, 410, 680, 890, 1250, 650],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Funzione per cambiare tab
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-button').forEach(button => {
                button.className = 'tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700';
            });
            
            document.getElementById('content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).className = 'tab-button flex items-center px-3 py-4 text-sm font-medium border-b-2 border-orange-500 text-orange-600';
        }

        // Funzione per aggiornare il conteggio degli ordini selezionati
        function updateSelection() {
            const selectedCount = document.querySelectorAll('.order-checkbox:checked').length;
            document.getElementById('selected-count').textContent = selectedCount;
        }

        // Funzione per generare il PDF
        function generatePDF() {
            const selectedOrders = document.querySelectorAll('.order-checkbox:checked');
            
            if (selectedOrders.length === 0) {
                alert('Seleziona almeno un ordine per creare il PDF');
                return;
            }

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(20);
                doc.text('ORDINI PASTO SANO - FORNITORE', 20, 20);
                
                doc.setFontSize(12);
                doc.text(`Data: ${new Date().toLocaleDateString('it-IT')}`, 20, 30);
                doc.text(`Ordini selezionati: ${selectedOrders.length}`, 20, 40);
                
                let yPosition = 60;
                
                selectedOrders.forEach((checkbox, index) => {
                    const customer = checkbox.dataset.customer;
                    const time = checkbox.dataset.time;
                    const items = checkbox.dataset.items;
                    const id = checkbox.dataset.id;
                    
                    doc.setFontSize(12);
                    doc.setFont(undefined, 'bold');
                    doc.text(`${index + 1}. #ORD${id.padStart(6, '0')}`, 20, yPosition);
                    yPosition += 8;
                    
                    if (yPosition > 250 && index < selectedOrders.length - 1) {
                        doc.addPage();
                        yPosition = 20;
                    }
                });
                
                doc.save('ordini-selezionati.pdf');
            } catch (error) {
                console.error('Errore nella generazione del PDF:', error);
                alert('Errore nella generazione del PDF: ' + error.message);
            }
        }

        function showOrderDetails(orderId) {
            const orders = {
                1: { customer: 'Mario Rossi', time: '19:45', status: 'preparazione', items: ['Spaghetti Carbonara x2', 'Tiramisu x1', 'Vino Rosso x1'], total: 45.50 },
                2: { customer: 'Anna Verdi', time: '20:15', status: 'servito', items: ['Pizza Margherita x1', 'Insalata Mista x1', 'Acqua x2', 'Caffe x2'], total: 28.00 },
                3: { customer: 'Luca Bianchi', time: '20:45', status: 'completato', items: ['Antipasto Misto x1', 'Bistecca alla Griglia x2', 'Contorno di Verdure x2'], total: 65.00 }
            };
            
            const order = orders[orderId];
            if (order) {
                alert(`Dettagli Ordine - ${order.customer}\n\nOrario: ${order.time}\nStato: ${order.status}\n\nArticoli:\n${order.items.join('\n')}\n\nTotale: â‚¬${order.total.toFixed(2)}`);
            }
        }

        // Inizializza i grafici quando la pagina Ã¨ caricata
        window.addEventListener('load', function() {
            createCharts();
        });
    </script>
</body>
</html>
                    
                    doc.setFontSize(11);
                    doc.setFont(undefined, 'normal');
                    doc.text(`- ${customer}`, 25, yPosition);
                    yPosition += 6;
                    
                    doc.text(`Orario: ${time}`, 25, yPosition);
                    yPosition += 6;
                    
                    doc.text(`Prodotti:`, 25, yPosition);
                    yPosition += 6;
                    
                    items.split(', ').forEach(item => {
                        doc.text(`  ${item}`, 30, yPosition);
                        yPosition += 5;
                    });
                    
                    yPosition += 8;
                    